name: üöÄ Run Bruno CLI Collection

on:
  workflow_dispatch:  # Permet de lancer manuellement depuis l'interface GitHub
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
      - develop

permissions:
  contents: read
  # id-token: write # √Ä activer UNIQUEMENT si tu te connectes √† AWS/Azure via OIDC. Pour Bruno/Sonar, c'est souvent inutile.

jobs:
  # J'ai renomm√© le job pour qu'il soit plus clair dans l'interface GitHub Actions
  bruno-api-tests:
    name: üß™ Bruno API Validation
    # Appel de ton template centralis√© (Tr√®s bonne pratique Showcase !)
    uses: soltani-a/soltania-devops-github-actions-templates-prototype/.github/workflows/nodejs-ci-template.yml@main
    secrets: inherit
    with:
      node-version: '20'
      # ‚ö†Ô∏è CORRECTION CRITIQUE ICI :
      # Ne laisse pas vide ''. Utilise '.' pour dire "r√©pertoire courant".
      # Vide peut causer des erreurs de chemin ou pointer vers la racine du syst√®me.
      working-directory: '.'